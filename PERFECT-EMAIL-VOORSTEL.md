# ğŸ“§ PERFECT Eerste Bevestigingsmail - PakketAdvies

## ğŸ¯ Doel
Een **NOG MOOIERE** eerste bevestigingsmail dan Gaslicht.com, met:
- âœ… Digitale contract viewer (klikbare knop)
- âœ… Volledige berekeningen en breakdown
- âœ… Leverancier logo's en branding
- âœ… Modern, responsive design
- âœ… Perfecte integratie met bestaande website

---

## ğŸ“Š Analyse Gaslicht.com Email

### **Wat ze goed doen:**
1. âœ… Duidelijke structuur met secties
2. âœ… Persoonlijke gegevens overzicht
3. âœ… Product details en tarieven
4. âœ… "Wat gaat er gebeuren?" timeline
5. âœ… Groene branding consistent

### **Wat wij BETER kunnen doen:**
1. ğŸš€ **Digitale Contract Viewer** - Interactieve pagina met alle details
2. ğŸ¨ **Modernere design** - Meer visueel, minder tekst
3. ğŸ“Š **Volledige berekeningen** - Breakdown zoals op resultaten pagina
4. ğŸ–¼ï¸ **Leverancier branding** - Logo's, kleuren, styling
5. ğŸ“± **Betere responsive** - Perfect op mobiel
6. ğŸ”— **Interactieve elementen** - Klikbare buttons, expandable secties
7. ğŸ’ **Premium feel** - Meer professioneel en vertrouwd

---

## ğŸ¨ Email Template Structuur

### **Email 1: Directe Bevestiging (VERBETERD)**

**Onderwerp:** âœ… Uw aanvraag is ontvangen - #{aanvraagnummer} | PakketAdvies

**Design Principes:**
- Brand-teal en brand-navy kleuren
- Leverancier logo prominent
- Duidelijke call-to-action buttons
- Responsive (mobile-first)
- Premium, vertrouwd gevoel

---

### **Email Layout:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [PakketAdvies Logo]                â”‚
â”‚  "ONAFHANKELIJK ENERGIE VERGELIJKEN"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‰ BEDANKT VOOR UW AANVRAG!        â”‚
â”‚  [Grote, vriendelijke header]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Leverancier Logo - Groot]         â”‚
â”‚  Uw aanvraag voor:                   â”‚
â”‚  [Contract Naam]                     â”‚
â”‚  bij [Leverancier Naam]              â”‚
â”‚                                      â”‚
â”‚  Aanvraagnummer: #{aanvraagnummer}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’° UW BESPARING                     â”‚
â”‚  [Grote, opvallende box]             â”‚
â”‚  â‚¬ [X] per jaar                      â”‚
â”‚  â‚¬ [X] per maand                     â”‚
â”‚                                      â”‚
â”‚  [Button: Bekijk volledige berekeningâ”‚
â”‚   â†’ Opent digitale contract viewer]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ OVERZICHT VAN UW AANVRAG        â”‚
â”‚  [Persoonlijke gegevens]             â”‚
â”‚  [Leveringsadres]                    â”‚
â”‚  [Verbruik]                          â”‚
â”‚  [Aansluitwaarden]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â±ï¸ WAT GEBEURT ER NU?              â”‚
â”‚  [Timeline met iconen]               â”‚
â”‚  1. Binnen 1 uur - Bevestiging      â”‚
â”‚  2. Binnen 1 werkdag - Contact      â”‚
â”‚  3. Binnen 2-3 weken - Actief       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”— BELANGRIJKE LINKS                â”‚
â”‚  [Button: Bekijk contract online]    â”‚
â”‚  [Button: Download contract PDF]     â”‚
â”‚  [Button: Status volgen]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ HEEFT U VRAGEN?                  â”‚
â”‚  Ons team staat voor u klaar         â”‚
â”‚  [Email] [Telefoon] [Chat]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Footer:                             â”‚
â”‚  - Unsubscribe link                  â”‚
â”‚  - Privacy policy                    â”‚
â”‚  - Social media                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Digitale Contract Viewer

### **Nieuwe Route: `/contract/[aanvraagnummer]`**

**Features:**
- âœ… Volledige contract details
- âœ… Interactieve prijs breakdown (zoals op resultaten pagina)
- âœ… Leverancier branding (logo, kleuren)
- âœ… Download PDF functionaliteit
- âœ… Status tracking
- âœ… Responsive design
- âœ… Share functionaliteit

**Secties:**
1. **Header:** Leverancier logo + contract naam
2. **Besparing:** Grote, opvallende box
3. **Prijs Breakdown:** Interactief, expandable
4. **Contract Details:** Looptijd, tarieven, voorwaarden
5. **Verbruik:** Overzicht van verbruik en aansluitwaarden
6. **Status:** Huidige status met timeline
7. **Documenten:** Download links
8. **Contact:** Contactgegevens

---

## ğŸ“§ Email Content (Gedetailleerd)

### **Header Sectie:**
```html
<div style="background: linear-gradient(135deg, #0F4C75 0%, #1A5F8A 100%); padding: 40px 20px; text-align: center;">
  <img src="[PakketAdvies Logo]" alt="PakketAdvies" style="max-width: 200px; margin-bottom: 10px;">
  <p style="color: #14B8A6; font-size: 14px; margin: 0;">ONAFHANKELIJK ENERGIE VERGELIJKEN</p>
</div>
```

### **Success Header:**
```html
<div style="background: #F0FDFA; padding: 30px 20px; text-align: center; border-top: 4px solid #14B8A6;">
  <h1 style="color: #0F4C75; font-size: 28px; margin: 0 0 10px 0;">ğŸ‰ Bedankt voor uw aanvraag!</h1>
  <p style="color: #64748B; font-size: 16px; margin: 0;">Uw aanvraag is succesvol ontvangen en wordt nu verwerkt</p>
</div>
```

### **Leverancier & Contract Sectie:**
```html
<div style="background: white; padding: 30px 20px; text-align: center; border-bottom: 1px solid #E2E8F0;">
  <img src="[Leverancier Logo URL]" alt="[Leverancier Naam]" style="max-width: 150px; margin-bottom: 20px;">
  <h2 style="color: #0F4C75; font-size: 22px; margin: 0 0 10px 0;">[Contract Naam]</h2>
  <p style="color: #64748B; font-size: 16px; margin: 0 0 20px 0;">bij [Leverancier Naam]</p>
  <div style="background: #F8FAFC; padding: 15px; border-radius: 8px; display: inline-block;">
    <p style="color: #64748B; font-size: 12px; margin: 0 0 5px 0;">Aanvraagnummer</p>
    <p style="color: #0F4C75; font-family: monospace; font-size: 18px; font-weight: bold; margin: 0;">#{aanvraagnummer}</p>
  </div>
</div>
```

### **Besparing Box (Groot & Opvallend):**
```html
<div style="background: linear-gradient(135deg, #14B8A6 0%, #0D9488 100%); padding: 40px 20px; text-align: center; margin: 30px 0;">
  <p style="color: white; font-size: 14px; margin: 0 0 10px 0; text-transform: uppercase; letter-spacing: 1px;">Uw besparing</p>
  <p style="color: white; font-size: 48px; font-weight: bold; margin: 0 0 5px 0;">â‚¬ [X]</p>
  <p style="color: rgba(255,255,255,0.9); font-size: 18px; margin: 0 0 30px 0;">per jaar</p>
  <a href="[Contract Viewer URL]" style="background: white; color: #14B8A6; padding: 15px 30px; border-radius: 8px; text-decoration: none; font-weight: bold; display: inline-block;">
    ğŸ“Š Bekijk volledige berekening
  </a>
</div>
```

### **Overzicht Sectie:**
```html
<div style="background: white; padding: 30px 20px; border: 1px solid #E2E8F0; border-radius: 8px; margin: 20px 0;">
  <h3 style="color: #0F4C75; font-size: 20px; margin: 0 0 20px 0;">ğŸ“‹ Overzicht van uw aanvraag</h3>
  
  <div style="margin-bottom: 15px;">
    <p style="color: #64748B; font-size: 12px; margin: 0 0 5px 0;">Naam</p>
    <p style="color: #0F4C75; font-size: 16px; margin: 0; font-weight: 500;">[Naam]</p>
  </div>
  
  <div style="margin-bottom: 15px;">
    <p style="color: #64748B; font-size: 12px; margin: 0 0 5px 0;">Leveringsadres</p>
    <p style="color: #0F4C75; font-size: 16px; margin: 0; font-weight: 500;">[Adres]</p>
    <p style="color: #64748B; font-size: 14px; margin: 5px 0 0 0;">[Postcode] [Plaats]</p>
  </div>
  
  <div style="margin-bottom: 15px;">
    <p style="color: #64748B; font-size: 12px; margin: 0 0 5px 0;">Verbruik</p>
    <p style="color: #0F4C75; font-size: 16px; margin: 0; font-weight: 500;">
      Elektriciteit: [X] kWh/jaar | Gas: [X] mÂ³/jaar
    </p>
  </div>
  
  <!-- etc -->
</div>
```

### **Timeline Sectie:**
```html
<div style="background: #F8FAFC; padding: 30px 20px; margin: 20px 0;">
  <h3 style="color: #0F4C75; font-size: 20px; margin: 0 0 25px 0; text-align: center;">â±ï¸ Wat gebeurt er nu?</h3>
  
  <div style="margin-bottom: 20px;">
    <div style="display: flex; align-items: start; gap: 15px;">
      <div style="background: #14B8A6; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
        <span style="color: white; font-size: 20px;">1</span>
      </div>
      <div>
        <p style="color: #0F4C75; font-size: 16px; font-weight: bold; margin: 0 0 5px 0;">Binnen 1 uur</p>
        <p style="color: #64748B; font-size: 14px; margin: 0;">U ontvangt een bevestigingsmail met alle details</p>
      </div>
    </div>
  </div>
  
  <!-- Stap 2, 3, etc -->
</div>
```

### **Call-to-Action Buttons:**
```html
<div style="text-align: center; margin: 30px 0;">
  <a href="[Contract Viewer URL]" style="background: #14B8A6; color: white; padding: 18px 40px; border-radius: 8px; text-decoration: none; font-weight: bold; display: inline-block; margin: 10px; font-size: 16px;">
    ğŸ“„ Bekijk contract online
  </a>
  <a href="[PDF Download URL]" style="background: white; color: #14B8A6; padding: 18px 40px; border-radius: 8px; text-decoration: none; font-weight: bold; display: inline-block; margin: 10px; border: 2px solid #14B8A6; font-size: 16px;">
    ğŸ“¥ Download contract PDF
  </a>
</div>
```

---

## ğŸ–¥ï¸ Digitale Contract Viewer Implementatie

### **Route: `/contract/[aanvraagnummer]`**

**Features:**
1. **Public toegankelijk** (geen login nodig, beveiligd via unieke URL)
2. **Volledige contract details** met alle berekeningen
3. **Interactieve prijs breakdown** (zoals ContractCard component)
4. **Leverancier branding** (logo, kleuren uit database)
5. **Status tracking** met timeline
6. **Download PDF** functionaliteit
7. **Share functionaliteit** (optioneel)
8. **Responsive design** (mobile + desktop)

### **Component Structuur:**
```
/contract/[aanvraagnummer]/
  â”œâ”€â”€ page.tsx (Server component - fetch data)
  â”œâ”€â”€ ContractViewer.tsx (Client component - main viewer)
  â”œâ”€â”€ PriceBreakdown.tsx (Reuse from ContractCard)
  â”œâ”€â”€ StatusTimeline.tsx (Status tracking)
  â””â”€â”€ DownloadButton.tsx (PDF generation)
```

---

## ğŸ› ï¸ Technische Implementatie

### **1. Email Service: Resend**
- âœ… React Email voor templates
- âœ… HTML emails met inline CSS
- âœ… Responsive design
- âœ… Leverancier logo's via URL

### **2. Email Templates:**
- âœ… Template componenten (Header, Besparing, Overzicht, Timeline, CTA)
- âœ… Dynamische data (contract, leverancier, berekeningen)
- âœ… Leverancier logo's en branding

### **3. Contract Viewer:**
- âœ… Next.js route met dynamic parameter
- âœ… Fetch aanvraag data via aanvraagnummer
- âœ… Reuse bestaande componenten (PriceBreakdown)
- âœ… PDF generation (optioneel)

### **4. Database:**
- âœ… Email logs tabel (tracking)
- âœ… Email status flags in contractaanvragen

---

## ğŸ“ Database Schema Uitbreiding

```sql
-- Email logs
CREATE TABLE email_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  aanvraag_id UUID REFERENCES contractaanvragen(id) ON DELETE CASCADE,
  email_type VARCHAR(50) NOT NULL,
  recipient_email TEXT NOT NULL,
  subject TEXT NOT NULL,
  status VARCHAR(20) NOT NULL,
  sent_at TIMESTAMP WITH TIME ZONE,
  opened_at TIMESTAMP WITH TIME ZONE,
  clicked_at TIMESTAMP WITH TIME ZONE,
  error_message TEXT,
  metadata JSONB,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Contract viewer access tracking
CREATE TABLE contract_viewer_access (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  aanvraag_id UUID REFERENCES contractaanvragen(id) ON DELETE CASCADE,
  access_token TEXT NOT NULL UNIQUE, -- Unieke token voor beveiligde toegang
  accessed_at TIMESTAMP WITH TIME ZONE,
  ip_address TEXT,
  user_agent TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

## ğŸ¨ Design Verbeteringen vs Gaslicht.com

### **Wat wij BETER doen:**

1. **ğŸ¨ Modernere Visual Design:**
   - Gradient backgrounds (brand-teal)
   - Betere spacing en typography
   - Moderne iconen (Phosphor Icons)
   - Card-based layout

2. **ğŸ“Š Interactieve Elementen:**
   - Klikbare "Bekijk contract" button
   - Digitale contract viewer
   - Expandable secties
   - Hover effects

3. **ğŸ–¼ï¸ Leverancier Branding:**
   - Grote leverancier logo
   - Leverancier kleuren (uit database)
   - Consistente styling

4. **ğŸ“± Betere Responsive:**
   - Mobile-first approach
   - Betere leesbaarheid op klein scherm
   - Touch-friendly buttons

5. **ğŸ’ Premium Feel:**
   - Minder tekst, meer visueel
   - Duidelijke hiÃ«rarchie
   - Professionele uitstraling

---

## ğŸ“§ Email Template Componenten

### **1. EmailHeader Component:**
- PakketAdvies logo
- Tagline
- Leverancier logo (groot)

### **2. BesparingBox Component:**
- Grote, opvallende box
- Jaar- en maandbedrag
- CTA button naar contract viewer

### **3. OverzichtSectie Component:**
- Persoonlijke gegevens
- Leveringsadres
- Verbruik
- Aansluitwaarden

### **4. TimelineSectie Component:**
- 3 stappen met iconen
- Duidelijke timing
- Visuele progressie

### **5. CTASectie Component:**
- "Bekijk contract online" button
- "Download PDF" button
- "Status volgen" button

### **6. ContactSectie Component:**
- Email, telefoon
- Openingstijden
- Chat optie (optioneel)

---

## ğŸš€ Implementatie Plan

### **Fase 1: Basis Setup**
1. âœ… Resend account + API key
2. âœ… React Email installeren
3. âœ… Database schema uitbreiden
4. âœ… Email template structuur

### **Fase 2: Email Template**
1. âœ… Basis email template maken
2. âœ… Leverancier logo integratie
3. âœ… Besparing box
4. âœ… Overzicht sectie
5. âœ… Timeline sectie
6. âœ… CTA buttons

### **Fase 3: Contract Viewer**
1. âœ… Route `/contract/[aanvraagnummer]` maken
2. âœ… Data fetching via aanvraagnummer
3. âœ… Contract viewer component
4. âœ… Price breakdown integratie
5. âœ… Leverancier branding
6. âœ… PDF download (optioneel)

### **Fase 4: Automatisering**
1. âœ… Email trigger in `/api/aanvragen/create`
2. âœ… Email logging
3. âœ… Error handling
4. âœ… Testing

### **Fase 5: Verfijning**
1. âœ… A/B testing
2. âœ… Analytics
3. âœ… Optimalisatie

---

## ğŸ’¡ Unieke Features (Beter dan Gaslicht.com)

1. **ğŸ”— Digitale Contract Viewer:**
   - Interactieve pagina met alle details
   - Real-time berekeningen
   - Leverancier branding
   - Download PDF

2. **ğŸ“Š Volledige Prijs Breakdown:**
   - Net zoals op resultaten pagina
   - Expandable secties
   - Visuele weergave

3. **ğŸ¨ Leverancier Branding:**
   - Logo's uit database
   - Leverancier kleuren
   - Consistente styling

4. **ğŸ“± Betere Mobile Experience:**
   - Touch-friendly
   - Betere leesbaarheid
   - Snellere laadtijden

5. **ğŸ”’ Beveiligde Toegang:**
   - Unieke tokens per aanvraag
   - Geen login nodig
   - Privacy-vriendelijk

---

## âœ… Success Criteria

- âœ… Email delivery rate > 98%
- âœ… Open rate > 45%
- âœ… Click rate op "Bekijk contract" > 25%
- âœ… Contract viewer page views > 80% van email opens
- âœ… Klanttevredenheid > 4.5/5

---

**Dit voorstel maakt onze email NOG MOOIER dan Gaslicht.com met unieke features zoals de digitale contract viewer!**

