ğŸ“‹ TAAK: Automatische Adres Invulling op Checkout Pagina

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ DOEL
Implementeer automatische adres lookup op de checkout pagina waarbij klanten alleen hun postcode, huisnummer en optionele toevoeging hoeven in te vullen. Het systeem haalt vervolgens automatisch straatnaam en plaatsnaam op via de PDOK Locatieserver API.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ LOCATIE
Pagina: Checkout/Afrekenpagina MOSE webshop (mose-webshop.vercel.app/checkout)

Betrokken velden:
â€¢ Postcode (1234 AB) 
â€¢ Huisnummer (nieuw veld - toevoegen)
â€¢ Toevoeging (nieuw veld - optioneel)
â€¢ Straat en huisnummer (bestaand - automatisch invullen)
â€¢ Plaats (bestaand - automatisch invullen)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ TECHNISCHE SPECIFICATIE

API Details:
â€¢ Provider: PDOK Locatieserver API v3.1 (gratis, geen API key)
â€¢ Endpoint: https://api.pdok.nl/bzk/locatieserver/search/v3_1/free
â€¢ Documentatie: https://api.pdok.nl/bzk/locatieserver/search/v3_1/ui/

Query voorbeeld:
postcode=9722EG (4 cijfers + 2 letters, uppercase)
huisnummer=27 (verplicht)
toevoeging=A (optioneel)

Query constructie:
let query = `postcode:${postcode} AND huisnummer:${huisnummer}`

Toevoeging handling:
â€¢ Enkele letter (A, B, C) â†’ huisletter
â€¢ Cijfer/combinatie (1, 2a, bis) â†’ huisnummertoevoeging

API response:
{
  "street": "Stavangerweg",
  "city": "Groningen"
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¨ UX FLOW

Veld layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2 Bezorging                         â”‚
â”‚                                      â”‚
â”‚ [Voornaam]        [Achternaam]      â”‚
â”‚                                      â”‚
â”‚ [Postcode*] [Huisnummer*] [Toev.]  â”‚
â”‚  (1234 AB)    (27)         (A)      â”‚
â”‚              [ğŸ” Adres ophalen]      â”‚
â”‚                                      â”‚
â”‚ [Straat en huisnummer] â† Auto       â”‚
â”‚ [Plaats] â† Auto                     â”‚
â”‚                                      â”‚
â”‚ [Telefoonnummer]                    â”‚
â”‚ [Land â–¼]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User flow:
1. Gebruiker vult in: postcode 9722EG, huisnummer 27, toevoeging A
2. Trigger: Automatisch bij blur/change OF knop "Adres ophalen"
3. Loading: Toon spinner, disable velden
4. Success: Vul "Stavangerweg 27A" en "Groningen" automatisch in
5. Error: Toon foutmelding, sta handmatige invoer toe

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… VALIDATIE REGELS

Postcode:
â€¢ Format: 4 cijfers + 2 letters (1234AB of 1234 AB)
â€¢ Automatisch uppercase + spaties verwijderen
â€¢ Regex: /^\d{4}[A-Z]{2}$/

Huisnummer:
â€¢ Verplicht
â€¢ Alleen cijfers
â€¢ Min: 1, Max: 99999

Toevoeging:
â€¢ Optioneel
â€¢ Letters, cijfers of combinaties
â€¢ Max 10 tekens

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”„ EDGE CASES

1. Adres wijzigen na opzoeken:
   â†’ Voeg "Wijzig adres" link toe
   â†’ Enable velden weer, clear straat/plaats

2. API niet beschikbaar:
   â†’ Fallback: sta handmatige invoer toe
   â†’ Toon melding

3. Formulier pre-fill (terugkerende klant):
   â†’ Respecteer opgeslagen data
   â†’ Skip API call als adres compleet is

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“± RESPONSIVE

Desktop: [Postcode] [Huisnummer] [Toevoeging] [Knop]
Mobile: Velden onder elkaar, knop full-width

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ ACCEPTANCE CRITERIA

âœ“ Postcode met/zonder spaties werkt
âœ“ Huisnummer + toevoeging velden toegevoegd
âœ“ API call correct met PDOK
âœ“ Auto-fill straat en plaats bij success
âœ“ Loading state zichtbaar
âœ“ Error meldingen duidelijk in NL
âœ“ Handmatige invoer mogelijk bij errors
âœ“ Client + server-side validatie
âœ“ Toevoeging correct gedetecteerd
âœ“ Werkt op desktop + mobile
âœ“ Fallback voor edge cases
âœ“ Adres wijzigen mogelijk na opzoeken

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š REFERENTIE

Zie /src/app/api/postcode/route.ts in PakketAdvies project voor volledige werkende implementatie. Kopieer deze logica 1-op-1.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ PRIORITY: High (verbetert checkout conversie)
â±ï¸ GESCHATTE TIJD: 4-6 uur

ğŸ“ OPMERKINGEN:
â€¢ PDOK API is gratis en vereist geen API key
â€¢ Response tijd < 200ms
â€¢ Test met verschillende postcodes/toevoegingen
â€¢ Overweeg analytics voor "auto" vs "handmatig" ratio

